<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>modules package &mdash; Solar System Survey Simulator Post Processing 0.0.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="modules.tests package" href="modules.tests.html" />
    <link rel="prev" title="Support" href="support.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Solar System Survey Simulator Post Processing
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a></li>
</ul>
<p class="caption"><span class="caption-text">Documentation:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">modules package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="modules.tests.html">modules.tests package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPAddUncertainties">modules.PPAddUncertainties module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#modules-ppappmag-to-module">modules.PPAppmag_to module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPBrightLimit">modules.PPBrightLimit module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#modules-ppcalculateapparentmagnitude-module">modules.PPCalculateApparentMagnitude module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPCalculateSimpleCometaryMagnitude">modules.PPCalculateSimpleCometaryMagnitude module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPCheckOrbitAndColoursMatching">modules.PPCheckOrbitAndColoursMatching module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPDetectionProbability">modules.PPDetectionProbability module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPDropObservations">modules.PPDropObservations module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPFilterDetectionEfficiencyThreshold">modules.PPFilterDetectionEfficiencyThreshold module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPFilterSSPCriterionEfficiency">modules.PPFilterSSPCriterionEfficiency module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPFootprintFilter">modules.PPFootprintFilter module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPJoinColourPointing">modules.PPJoinColourPointing module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPJoinCometaryWithOrbits">modules.PPJoinCometaryWithOrbits module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPMakeIntermediatePointingDatabase">modules.PPMakeIntermediatePointingDatabase module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPMatchFieldConditions">modules.PPMatchFieldConditions module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPMatchPointing">modules.PPMatchPointing module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPMatchPointingsAndColours">modules.PPMatchPointingsAndColours module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPOutWriteCSV">modules.PPOutWriteCSV module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPOutWriteHDF5">modules.PPOutWriteHDF5 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPOutWriteSqlite3">modules.PPOutWriteSqlite3 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPRandomize">modules.PPRandomize module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPRandomizeMeasurements">modules.PPRandomizeMeasurements module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPReadBrightness">modules.PPReadBrightness module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPReadColours">modules.PPReadColours module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPReadCometaryInput">modules.PPReadCometaryInput module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPReadIntermDatabase">modules.PPReadIntermDatabase module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPReadOif">modules.PPReadOif module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPReadOrbitFile">modules.PPReadOrbitFile module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPSimpleSensorArea">modules.PPSimpleSensorArea module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPTrailingLoss">modules.PPTrailingLoss module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPTranslateMagnitude">modules.PPTranslateMagnitude module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPVignetting">modules.PPVignetting module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPhookBrightnessWithColour">modules.PPhookBrightnessWithColour module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules.PPreadColoursUser">modules.PPreadColoursUser module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-modules">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="lsstcomet.html">lsstcomet package</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Solar System Survey Simulator Post Processing</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>modules package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/modules.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="modules-package">
<h1>modules package<a class="headerlink" href="#modules-package" title="Permalink to this headline"></a></h1>
<section id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline"></a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="modules.tests.html">modules.tests package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="modules.tests.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.tests.html#module-modules.tests.test_PPAddUncertaintiy">modules.tests.test_PPAddUncertaintiy module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.tests.html#module-modules.tests.test_PPBrightLimit">modules.tests.test_PPBrightLimit module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.tests.html#module-modules.tests.test_PPCalculateApparentMagnitude">modules.tests.test_PPCalculateApparentMagnitude module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.tests.html#module-modules.tests.test_PPCalculateSimpleCometaryMagnitude">modules.tests.test_PPCalculateSimpleCometaryMagnitude module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.tests.html#module-modules.tests.test_PPCheckOrbitAndColoursMatching">modules.tests.test_PPCheckOrbitAndColoursMatching module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.tests.html#module-modules.tests.test_PPDetectionProbability">modules.tests.test_PPDetectionProbability module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.tests.html#module-modules.tests.test_PPFilterDetectionEfficiencyThreshold">modules.tests.test_PPFilterDetectionEfficiencyThreshold module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.tests.html#module-modules.tests.test_PPFilterSSPCriterionEfficiency">modules.tests.test_PPFilterSSPCriterionEfficiency module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.tests.html#module-modules.tests.test_PPJoinColourPointing">modules.tests.test_PPJoinColourPointing module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.tests.html#module-modules.tests.test_PPJoinCometaryWithOrbits">modules.tests.test_PPJoinCometaryWithOrbits module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.tests.html#module-modules.tests.test_PPMakeIntermediatePointingDatabase">modules.tests.test_PPMakeIntermediatePointingDatabase module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.tests.html#module-modules.tests.test_PPMatchPointing">modules.tests.test_PPMatchPointing module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.tests.html#module-modules.tests.test_PPMatchPointingsAndColours">modules.tests.test_PPMatchPointingsAndColours module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.tests.html#module-modules.tests.test_PPOutWriteCSV">modules.tests.test_PPOutWriteCSV module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.tests.html#module-modules.tests.test_PPOutWriteHDF5">modules.tests.test_PPOutWriteHDF5 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.tests.html#module-modules.tests.test_PPOutWriteSqlite3">modules.tests.test_PPOutWriteSqlite3 module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.tests.html#module-modules.tests.test_PPRandomize">modules.tests.test_PPRandomize module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.tests.html#module-modules.tests.test_PPReadBrightness">modules.tests.test_PPReadBrightness module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.tests.html#module-modules.tests.test_PPReadCometaryInput">modules.tests.test_PPReadCometaryInput module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.tests.html#module-modules.tests.test_PPReadIntermDatabase">modules.tests.test_PPReadIntermDatabase module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.tests.html#module-modules.tests.test_PPReadOrbitFile">modules.tests.test_PPReadOrbitFile module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.tests.html#module-modules.tests.test_PPTrailingLoss">modules.tests.test_PPTrailingLoss module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.tests.html#module-modules.tests.test_PPhookBrightnessWithColour">modules.tests.test_PPhookBrightnessWithColour module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.tests.html#module-modules.tests.test_PPreadColours">modules.tests.test_PPreadColours module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.tests.html#module-modules.tests.test_PPreadColoursUser">modules.tests.test_PPreadColoursUser module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.tests.html#module-modules.tests.test_PPresolveFilters">modules.tests.test_PPresolveFilters module</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.tests.html#module-modules.tests">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</section>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline"></a></h2>
</section>
<section id="module-modules.PPAddUncertainties">
<span id="modules-ppadduncertainties-module"></span><h2>modules.PPAddUncertainties module<a class="headerlink" href="#module-modules.PPAddUncertainties" title="Permalink to this headline"></a></h2>
<p>Calculate Astrometric and Photometric Uncertainties for ground based observations.</p>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPAddUncertainties.addUncertainties">
<span class="sig-prename descclassname"><span class="pre">modules.PPAddUncertainties.</span></span><span class="sig-name descname"><span class="pre">addUncertainties</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ephemsdf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obsdf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fieldRA'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fieldDec'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obsIdName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'FieldID'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obsEpochName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'observationStartMJD'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raNameEph</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'AstRA(deg)'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decNameEph</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'AstDec(deg)'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obsIdNameEph</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'observationId'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ephEpochName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'FieldMJD'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limMagName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fiveSigmaDepth'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seeingName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'seeingFwhmGeom'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filterMagName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'MaginFil'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPAddUncertainties.addUncertainties" title="Permalink to this definition"></a></dt>
<dd><p>Add astrometric and photometric uncertainties to observations generated through JPL ephemeris simulator.</p>
<p>ephemsdf   … Pandas dataFrame containing output of JPL ephemeris simulator
obsdf    … Pandas dataFrame containing survey simulator output such as LSST opsim
<a href="#id1"><span class="problematic" id="id2">*</span></a>Name    … relevant column names in obsdf
<a href="#id3"><span class="problematic" id="id4">*</span></a>NameEph … relevant column names in ephemsdf</p>
<p>ephemsOut … ephems Pandas dataFrame (observations with added uncertainties)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modules.PPAddUncertainties.calcAstrometricUncertainty">
<span class="sig-prename descclassname"><span class="pre">modules.PPAddUncertainties.</span></span><span class="sig-name descname"><span class="pre">calcAstrometricUncertainty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">m5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nvisit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">FWHMeff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">700.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">error_sys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">astErrCoeff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_units</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mas'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPAddUncertainties.calcAstrometricUncertainty" title="Permalink to this definition"></a></dt>
<dd><p>Calculate the astrometric uncertainty, for object catalog purposes.
The effective FWHMeff MUST BE given in miliarcsec (NOT arcsec!).
Systematic error, error_sys, must be given in miliarcsec.
The result corresponds to a single-coordinate uncertainty.
Note that the total astrometric uncertainty (e.g. relevant when
matching two catalogs) will be sqrt(2) times larger.
Default values for parameters are based on estimates for LSST.</p>
<blockquote>
<div><p>mag            …    magnitude of the observation
m5             …    5-sigma limiting magnitude
nvisit         …    number of visits to consider
FWHMeff        …    effective Full Width at Half Maximum of Point Spread Function [mas]
error_sys      …    sytstematic error [mas]
output_units   …    ‘mas’ (default): milliarcseconds, ‘arcsec’: arcseconds</p>
</div></blockquote>
<blockquote>
<div><p>astrom_error   …    astrometric error
SNR            …    signal to noise ratio
error_rand     …    random error</p>
</div></blockquote>
<p>The astrometric error can be applied to parallax or proper motion (for nvisit&gt;1).
If applying to proper motion, should also divide by the # of years of the survey.
This is also referenced in the LSST overview paper (arXiv:0805.2366, ls.st/lop)</p>
<ul class="simple">
<li><p>assumes sqrt(Nvisit) scaling, which is the best-case scenario</p></li>
<li><p>calcRandomAstrometricError assumes maxiumm likelihood solution,
which is also the best-case scenario</p></li>
<li><p>the systematic error, error_sys = 10 mas, corresponds to the
design spec from the LSST Science Requirements Document (ls.st/srd)</p></li>
</ul>
<p>numpy as np</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modules.PPAddUncertainties.calcPhotometricUncertainty">
<span class="sig-prename descclassname"><span class="pre">modules.PPAddUncertainties.</span></span><span class="sig-name descname"><span class="pre">calcPhotometricUncertainty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">SNR</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPAddUncertainties.calcPhotometricUncertainty" title="Permalink to this definition"></a></dt>
<dd><p>Photometric uncertainty in magnitudes from flux signal to noise ratio.</p>
<blockquote>
<div><p>snr … is the signal to noise ratio in flux</p>
</div></blockquote>
<blockquote>
<div><p>photSig … photometric uncertainty [mag]</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modules.PPAddUncertainties.calcRandomAstrometricErrorPerCoord">
<span class="sig-prename descclassname"><span class="pre">modules.PPAddUncertainties.</span></span><span class="sig-name descname"><span class="pre">calcRandomAstrometricErrorPerCoord</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">FWHMeff</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">SNR</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">AstromErrCoeff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.6</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPAddUncertainties.calcRandomAstrometricErrorPerCoord" title="Permalink to this definition"></a></dt>
<dd><p>Calculate the random astrometric uncertainty, as a function of
effective FWHMeff and signal-to-noise ratio SNR
Returns astrometric uncertainty in the same units as FWHM.
** This error corresponds to a single-coordinate error **
the total astrometric uncertainty (e.g. relevant when matching
two catalogs) will be sqrt(2) times larger.</p>
<blockquote>
<div><p>FWHMeff        …    effective Full Width at Half Maximum of Point Spread Function [mas]
SNR            …    signal to noise ratio
AstromErrCoeff …    Astrometric error coefficient (see description below)</p>
</div></blockquote>
<blockquote>
<div><p>RandomAstrometricErrorPerCoord … random astrometric uncertainty per coordinate</p>
</div></blockquote>
<p>The coefficient AstromErrCoeff for Maximum Likelihood
solution is given by</p>
<blockquote>
<div><p>AstromErrCoeff = &lt;P^2&gt; / &lt;<a href="#id5"><span class="problematic" id="id6">|</span></a>dP/dx|^2&gt; * 1/FWHMeff</p>
</div></blockquote>
<p>where P is the point spread function, P(x,y).</p>
<p>For a single-Gaussian PSF, AstromErrCoeff = 0.60
For a double-Gaussian approximation to Kolmogorov
seeing, AstromErrCoeff = 0.55; however, given the
same core seeing (FWHMgeom) as for a single-Gaussian
PSF, the resulting error will be 36% larger because
FWHMeff is 1.22 times larger and SNR is 1.22 times
smaller, compared to error for single-Gaussian PSF.
Although Kolmogorov seeing is a much better approximation
of the free atmospheric seeing than single Gaussian seeing,
the default value of AstromErrCoeff is set to the
more conservative value.
Note also that AstromErrCoeff = 1.0 is often used in
practice to empirically account for other error sources.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modules.PPAddUncertainties.magErrorFromSNR">
<span class="sig-prename descclassname"><span class="pre">modules.PPAddUncertainties.</span></span><span class="sig-name descname"><span class="pre">magErrorFromSNR</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">snr</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPAddUncertainties.magErrorFromSNR" title="Permalink to this definition"></a></dt>
<dd><p>Convert flux signal to noise ratio to an uncertainty in magnitude.</p>
<blockquote>
<div><p>snr … is the signal to noise ratio in flux</p>
</div></blockquote>
<blockquote>
<div><p>magerr … the resulting uncertainty in magnitude</p>
</div></blockquote>
<p>numpy as np</p>
</dd></dl>

</section>
<section id="modules-ppappmag-to-module">
<h2>modules.PPAppmag_to module<a class="headerlink" href="#modules-ppappmag-to-module" title="Permalink to this headline"></a></h2>
</section>
<section id="module-modules.PPBrightLimit">
<span id="modules-ppbrightlimit-module"></span><h2>modules.PPBrightLimit module<a class="headerlink" href="#module-modules.PPBrightLimit" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPBrightLimit.PPBrightLimit">
<span class="sig-prename descclassname"><span class="pre">modules.PPBrightLimit.</span></span><span class="sig-name descname"><span class="pre">PPBrightLimit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">padain</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">brlimit</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPBrightLimit.PPBrightLimit" title="Permalink to this definition"></a></dt>
<dd><p>Task: PPBrightLimit</p>
<p>Description: Goes through every row in pandas dataframe and drops lines the ColinFil
of which is brighter than the defined magnitude.</p>
<p>Input: padain: pandas dataframe
upperlimit: float, upper limit for ColinFil column value in padain dataframe</p>
<p>Output: pandas dataframe (modified)</p>
</dd></dl>

</section>
<section id="modules-ppcalculateapparentmagnitude-module">
<h2>modules.PPCalculateApparentMagnitude module<a class="headerlink" href="#modules-ppcalculateapparentmagnitude-module" title="Permalink to this headline"></a></h2>
</section>
<section id="module-modules.PPCalculateSimpleCometaryMagnitude">
<span id="modules-ppcalculatesimplecometarymagnitude-module"></span><h2>modules.PPCalculateSimpleCometaryMagnitude module<a class="headerlink" href="#module-modules.PPCalculateSimpleCometaryMagnitude" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPCalculateSimpleCometaryMagnitude.PPCalculateSimpleCometaryMagnitude">
<span class="sig-prename descclassname"><span class="pre">modules.PPCalculateSimpleCometaryMagnitude.</span></span><span class="sig-name descname"><span class="pre">PPCalculateSimpleCometaryMagnitude</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">padain</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mainfilter</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPCalculateSimpleCometaryMagnitude.PPCalculateSimpleCometaryMagnitude" title="Permalink to this definition"></a></dt>
<dd><p>PPCalculateSimpleCometaryMagnitude.py</p>
<p>Description: This task calculates the brightness of the comet at a given pointing
according to a simple model by A’Hearn et al. (1984).</p>
<p>The brightness is here calculated in the main filter, and the colour offset is
applied later using the PPhookBrightnessWithColour function.</p>
<dl class="simple">
<dt>Mandatory input:      string, padain, name of input pandas daraframe   </dt><dd><dl class="simple">
<dt>string, mainfilter, name of the main filter in which</dt><dd><p>the brightness is calculated</p>
</dd>
</dl>
</dd>
</dl>
<p>Output:</p>
<p>usage: padaout=PPCalculateSimpleCometaryMagnitude(padain)</p>
</dd></dl>

</section>
<section id="module-modules.PPCheckOrbitAndColoursMatching">
<span id="modules-ppcheckorbitandcoloursmatching-module"></span><h2>modules.PPCheckOrbitAndColoursMatching module<a class="headerlink" href="#module-modules.PPCheckOrbitAndColoursMatching" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPCheckOrbitAndColoursMatching.PPCheckOrbitAndColoursMatching">
<span class="sig-prename descclassname"><span class="pre">modules.PPCheckOrbitAndColoursMatching.</span></span><span class="sig-name descname"><span class="pre">PPCheckOrbitAndColoursMatching</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">orbin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">poiin</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPCheckOrbitAndColoursMatching.PPCheckOrbitAndColoursMatching" title="Permalink to this definition"></a></dt>
<dd><dl class="simple">
<dt>Description: Checks whether orbit and colour files contain the same object id:s, and</dt><dd><p>additionally checks if the pointing database object id:s is a subset of 
all the object id:s found in the orbit/physical parameter files.</p>
</dd>
<dt>Mandatory input:   pandas dataframe: orbin – orbits</dt><dd><p>pandas dataframe: colin – colours/cometary parameters
pandas dataframe: poiin – pointing database</p>
</dd>
</dl>
<p>Output:            None; return if there is a match, throw error and quit if mismatch.</p>
<p>Usage: PPCheckOrbitAndColoursMatching(orbin,colin,poiin)</p>
</dd></dl>

</section>
<section id="module-modules.PPDetectionProbability">
<span id="modules-ppdetectionprobability-module"></span><h2>modules.PPDetectionProbability module<a class="headerlink" href="#module-modules.PPDetectionProbability" title="Permalink to this headline"></a></h2>
<p>Calculate probability of detection due to fading</p>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPDetectionProbability.PPDetectionProbability">
<span class="sig-prename descclassname"><span class="pre">modules.PPDetectionProbability.</span></span><span class="sig-name descname"><span class="pre">PPDetectionProbability</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oif_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">survey_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trailing_losses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trailing_loss_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'dmagDetect'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">magnitude_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'MaginFil'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limiting_magnitude_name_survey</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fiveSigmaDepth'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field_id_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'FieldID'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field_id_name_survey</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'FieldID'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fillFactor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">w</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPDetectionProbability.PPDetectionProbability" title="Permalink to this definition"></a></dt>
<dd><p>Probability of observations being observable for objectInField output.</p>
<p>oif_df          … pandas dataframe containing objectsInField output.
survey_df       … pandas dataframe containing observation data (i.e., field limiting magnitudes).
<a href="#id7"><span class="problematic" id="id8">*</span></a>_name          … names of columns in oif_df
<a href="#id9"><span class="problematic" id="id10">*</span></a>name_survey    … names of columns in survey_df
fillFactor      … fraction of the field of view covered by sensors.
w               … distribution parameter</p>
</dd></dl>

</section>
<section id="module-modules.PPDropObservations">
<span id="modules-ppdropobservations-module"></span><h2>modules.PPDropObservations module<a class="headerlink" href="#module-modules.PPDropObservations" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPDropObservations.PPDropObservations">
<span class="sig-prename descclassname"><span class="pre">modules.PPDropObservations.</span></span><span class="sig-name descname"><span class="pre">PPDropObservations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">observations</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">probability</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'detection</span> <span class="pre">probability'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPDropObservations.PPDropObservations" title="Permalink to this definition"></a></dt>
<dd><p>Drops rows where the probabilty of detection is less than sample drawn
from a uniform distribution.</p>
<p>observations … pandas dataframe of observations with a column containing the probability of detection
probability  … name of the column containing the probability of detection</p>
<p>out … new dataframe without observations that could not be observed</p>
</dd></dl>

</section>
<section id="module-modules.PPFilterDetectionEfficiencyThreshold">
<span id="modules-ppfilterdetectionefficiencythreshold-module"></span><h2>modules.PPFilterDetectionEfficiencyThreshold module<a class="headerlink" href="#module-modules.PPFilterDetectionEfficiencyThreshold" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPFilterDetectionEfficiencyThreshold.PPFilterDetectionEfficiencyThreshold">
<span class="sig-prename descclassname"><span class="pre">modules.PPFilterDetectionEfficiencyThreshold.</span></span><span class="sig-name descname"><span class="pre">PPFilterDetectionEfficiencyThreshold</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">padain</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPFilterDetectionEfficiencyThreshold.PPFilterDetectionEfficiencyThreshold" title="Permalink to this definition"></a></dt>
<dd><p>Task: PPFilterDetectionEfficiencyThreshold</p>
<dl class="simple">
<dt>Input: padain: pandas dataframe, in objectsInField (oif) format, </dt><dd><p>threshold: float, between 0 and 1</p>
</dd>
</dl>
<p>Action: Goes through every row in pandas dataframe and accepts/declines based on
pre-determined acceptance threshold (between 0 and 1).</p>
<p>Output: pandas dataframe (modified)</p>
</dd></dl>

</section>
<section id="module-modules.PPFilterSSPCriterionEfficiency">
<span id="modules-ppfiltersspcriterionefficiency-module"></span><h2>modules.PPFilterSSPCriterionEfficiency module<a class="headerlink" href="#module-modules.PPFilterSSPCriterionEfficiency" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPFilterSSPCriterionEfficiency.PPFilterSSPCriterionEfficiency">
<span class="sig-prename descclassname"><span class="pre">modules.PPFilterSSPCriterionEfficiency.</span></span><span class="sig-name descname"><span class="pre">PPFilterSSPCriterionEfficiency</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">padain</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minintracklets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nooftracklets</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intervaltime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inSepThresHoldAsec</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPFilterSSPCriterionEfficiency.PPFilterSSPCriterionEfficiency" title="Permalink to this definition"></a></dt>
<dd><p>PPFilterSSPCriterionEfficiency.py</p>
<p>Description: This task reads in the modified pandas dataframe
(including colours), checks if coordinates within tracklets are far enough 
to be separated by SSP, checks against the SSP detection criterion
(_nooftracklets_ detections over _intervaltime_ nights), and outputs only the objects
that satisfy that criterion.</p>
<p>Generally, to be applied after detection threshold.</p>
<dl>
<dt>Mandatory input:   padain: modified pandas dataframe</dt><dd><p>minintracklets: integer, minimum number of observations
nooftracklets: integer, number of tracklets required for linking
interval time: float, interval of time (in days) which should include</p>
<blockquote>
<div><p>nooftracklets to qualify for a detection.</p>
</div></blockquote>
<dl class="simple">
<dt>inSepThresHoldAsec: float: minimum separation for SSP inside the tracklet</dt><dd><p>to distinguish between two images to recognise the motion 
between images</p>
</dd>
</dl>
</dd>
</dl>
<p>Output:               pandas dataframe</p>
<p>usage: padafr=PPFilterSSPCriterionEfficiency(padain,minintracklet,nooftracklets,intervaltime, inSepThresHoldAsec)</p>
</dd></dl>

</section>
<section id="module-modules.PPFootprintFilter">
<span id="modules-ppfootprintfilter-module"></span><h2>modules.PPFootprintFilter module<a class="headerlink" href="#module-modules.PPFootprintFilter" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPFootprintFilter.footPrintFilter">
<span class="sig-prename descclassname"><span class="pre">modules.PPFootprintFilter.</span></span><span class="sig-name descname"><span class="pre">footPrintFilter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">observations</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">survey</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detectors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ra_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'AstRA(deg)'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'AstDec(deg)'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'FieldID'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ra_name_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fieldRA'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec_name_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fieldDec'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rot_name_field</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'rotSkyPos'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPFootprintFilter.footPrintFilter" title="Permalink to this definition"></a></dt>
<dd><p>Applies camera footpint to remove observations that do not fall on
detector chips.
Input
—–
observations        … pandas dataframe containing ra, dec, and fieldID.
survey              … pandas dataframe containing fieldID, field center ra</p>
<blockquote>
<div><p>and dec, and field rotation.</p>
</div></blockquote>
<dl class="simple">
<dt>detectors           … list of lists containing detectors corners as angles</dt><dd><p>from x and y axes.</p>
</dd>
</dl>
<p>detectedObs         … mask for observations that will return detected observations.</p>
</dd></dl>

</section>
<section id="module-modules.PPJoinColourPointing">
<span id="modules-ppjoincolourpointing-module"></span><h2>modules.PPJoinColourPointing module<a class="headerlink" href="#module-modules.PPJoinColourPointing" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPJoinColourPointing.PPJoinColourPointing">
<span class="sig-prename descclassname"><span class="pre">modules.PPJoinColourPointing.</span></span><span class="sig-name descname"><span class="pre">PPJoinColourPointing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">padafr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">padacl</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPJoinColourPointing.PPJoinColourPointing" title="Permalink to this definition"></a></dt>
<dd><p>PPJoinColourPointing.py</p>
<p>Description: This task  joins the pointing pandas database with the
colour pandas database. Each database has to have same ObjID:s: NaN:s will
be populate the fields for the missing objects.</p>
<p>Mandatory input:      oif pandas database and colour database</p>
<p>Output:               new joined pandas dataframe</p>
<p>usage: padafr1=PPJoinColourPointing(padafr,padacl)</p>
</dd></dl>

</section>
<section id="module-modules.PPJoinCometaryWithOrbits">
<span id="modules-ppjoincometarywithorbits-module"></span><h2>modules.PPJoinCometaryWithOrbits module<a class="headerlink" href="#module-modules.PPJoinCometaryWithOrbits" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPJoinCometaryWithOrbits.PPJoinCometaryWithOrbits">
<span class="sig-prename descclassname"><span class="pre">modules.PPJoinCometaryWithOrbits.</span></span><span class="sig-name descname"><span class="pre">PPJoinCometaryWithOrbits</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">padafr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">padaor</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPJoinCometaryWithOrbits.PPJoinCometaryWithOrbits" title="Permalink to this definition"></a></dt>
<dd><p>PPJoinCometaryWithOrbits.py</p>
<p>Description: This task  joins the pointing pandas database with the
colour/cometary pandas database. Each database has to have same ObjID:s: NaN:s will
be populate the fields for the missing objects.</p>
<p>Mandatory input:      oif pandas database and colour/cometary database</p>
<p>Output:               new joined pandas dataframe</p>
<p>usage: padafr1=PPPJoinCometaryWithOrbits(padafr,padaor)</p>
</dd></dl>

</section>
<section id="module-modules.PPMakeIntermediatePointingDatabase">
<span id="modules-ppmakeintermediatepointingdatabase-module"></span><h2>modules.PPMakeIntermediatePointingDatabase module<a class="headerlink" href="#module-modules.PPMakeIntermediatePointingDatabase" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPMakeIntermediatePointingDatabase.PPMakeIntermediatePointingDatabase">
<span class="sig-prename descclassname"><span class="pre">modules.PPMakeIntermediatePointingDatabase.</span></span><span class="sig-name descname"><span class="pre">PPMakeIntermediatePointingDatabase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oif_output</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunkSize</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPMakeIntermediatePointingDatabase.PPMakeIntermediatePointingDatabase" title="Permalink to this definition"></a></dt>
<dd><p>PPMakeIntermediatePointingDatabase.py</p>
<blockquote>
<div><p>Description: This task makes an intermediate pointing database from the output of
ObjectsInField. This database is done in chunks to avoid memory problems.</p>
<dl class="simple">
<dt>Mandatory input:      string, oifoutput, name of output of oif, a tab-separated (later csv) file</dt><dd><p>string, outf, path and name of output intermediate sqlite3 database
int, chunkSize,</p>
</dd>
</dl>
<p>Output:               sqlite3 intermediate database</p>
<p>usage: intermdb=PPReadIntermDatabase(oif_output,outf,chunkSize)</p>
</div></blockquote>
</dd></dl>

</section>
<section id="module-modules.PPMatchFieldConditions">
<span id="modules-ppmatchfieldconditions-module"></span><h2>modules.PPMatchFieldConditions module<a class="headerlink" href="#module-modules.PPMatchFieldConditions" title="Permalink to this headline"></a></h2>
<p>Extracts observation ID, limiting magnitude, and seeing from survey database, 
returing them as a 3*n pandas database.</p>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPMatchFieldConditions.PPMatchFieldConditions">
<span class="sig-prename descclassname"><span class="pre">modules.PPMatchFieldConditions.</span></span><span class="sig-name descname"><span class="pre">PPMatchFieldConditions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dbname</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPMatchFieldConditions.PPMatchFieldConditions" title="Permalink to this definition"></a></dt>
<dd><p>dbname … name of survey database</p>
<dl class="simple">
<dt>fieldConditions … pandas dataframe containing field ID, limiting </dt><dd><p>magnitude, and seeing</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-modules.PPMatchPointing">
<span id="modules-ppmatchpointing-module"></span><h2>modules.PPMatchPointing module<a class="headerlink" href="#module-modules.PPMatchPointing" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPMatchPointing.PPMatchPointing">
<span class="sig-prename descclassname"><span class="pre">modules.PPMatchPointing.</span></span><span class="sig-name descname"><span class="pre">PPMatchPointing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bsdbname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resfilters</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPMatchPointing.PPMatchPointing" title="Permalink to this definition"></a></dt>
<dd><p>PPMatchPointing.py</p>
<p>Description: This task reads in the main baseline database, and extracts observationID,
observationsStartMJD, used filter and three seeing parameters at a given pointing and outputs a 6*n pandas dataframe.</p>
<dl class="simple">
<dt>Mandatory input:      bsdbname:   name of database</dt><dd><p>resfilters: filters required for output</p>
</dd>
</dl>
<p>Output:               8*n pandas dataframe</p>
<p>usage: padafr=PPMatchPointing(bsdbname,resfilters)</p>
</dd></dl>

</section>
<section id="module-modules.PPMatchPointingsAndColours">
<span id="modules-ppmatchpointingsandcolours-module"></span><h2>modules.PPMatchPointingsAndColours module<a class="headerlink" href="#module-modules.PPMatchPointingsAndColours" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPMatchPointingsAndColours.PPMatchPointingsAndColours">
<span class="sig-prename descclassname"><span class="pre">modules.PPMatchPointingsAndColours.</span></span><span class="sig-name descname"><span class="pre">PPMatchPointingsAndColours</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">padain</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pointfildb</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPMatchPointingsAndColours.PPMatchPointingsAndColours" title="Permalink to this definition"></a></dt>
<dd><p>PPMatchPointingsAndColours.py</p>
<p>Description: This task takes two pandas dataframes: one is output that includes all 
relevant colours, the other is a two-column database that includes all the fieldId:s
and the filters at the given pointing.</p>
<p>The task cross-matches the two databases, matches the pre-calculated colour in each 
pointing with the relevant filter. Then it leaves only the relevant colour and the
filter, and erases all the obsolete colours.</p>
<dl class="simple">
<dt>Mandatory input:      Output from objectsInField (oif) with additional relevant colour</dt><dd><p>columns (pandas dataframes)
pointing and filter dataframe (pandas dataframe)</p>
</dd>
</dl>
<p>Output:               pandas dataframe</p>
<p>usage: padafr=PPMatchPointingsAndColours(padain,pointfildb)</p>
</dd></dl>

</section>
<section id="module-modules.PPOutWriteCSV">
<span id="modules-ppoutwritecsv-module"></span><h2>modules.PPOutWriteCSV module<a class="headerlink" href="#module-modules.PPOutWriteCSV" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPOutWriteCSV.PPOutWriteCSV">
<span class="sig-prename descclassname"><span class="pre">modules.PPOutWriteCSV.</span></span><span class="sig-name descname"><span class="pre">PPOutWriteCSV</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">padain</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outf</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPOutWriteCSV.PPOutWriteCSV" title="Permalink to this definition"></a></dt>
<dd><p>PPOutWriteCSV.py</p>
<p>Description: This task reads in the pandas database, and writes out a CSV file by a name given by the user.</p>
<p>Mandatory input:      name of database, name of output file</p>
<p>Output:               CSV file</p>
<p>usage: padafr=PPOutWriteCSV(padain,outf)</p>
</dd></dl>

</section>
<section id="module-modules.PPOutWriteHDF5">
<span id="modules-ppoutwritehdf5-module"></span><h2>modules.PPOutWriteHDF5 module<a class="headerlink" href="#module-modules.PPOutWriteHDF5" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPOutWriteHDF5.PPOutWriteHDF5">
<span class="sig-prename descclassname"><span class="pre">modules.PPOutWriteHDF5.</span></span><span class="sig-name descname"><span class="pre">PPOutWriteHDF5</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pp_results</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keyin</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPOutWriteHDF5.PPOutWriteHDF5" title="Permalink to this definition"></a></dt>
<dd><p>PPOutWriteSqlite3.py</p>
<p>Description: This task reads in the pandas database, and writes out a HDF5 binary file by a name given by the user.</p>
<p>Mandatory input:      name of database, name of output file</p>
<p>Output:               HDF5 binary database</p>
<p>usage: padafr=PPOutWriteHDF5(padain,outf)</p>
</dd></dl>

</section>
<section id="module-modules.PPOutWriteSqlite3">
<span id="modules-ppoutwritesqlite3-module"></span><h2>modules.PPOutWriteSqlite3 module<a class="headerlink" href="#module-modules.PPOutWriteSqlite3" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPOutWriteSqlite3.PPOutWriteSqlite3">
<span class="sig-prename descclassname"><span class="pre">modules.PPOutWriteSqlite3.</span></span><span class="sig-name descname"><span class="pre">PPOutWriteSqlite3</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pp_results</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outf</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPOutWriteSqlite3.PPOutWriteSqlite3" title="Permalink to this definition"></a></dt>
<dd><p>PPOutWriteSqlite3.py</p>
<p>Description: This task reads in the pandas database, and writes out a Sqlite3 database file by a name given by the user.</p>
<p>Mandatory input:      name of database, name of output file</p>
<p>Output:               Sqlite3 database</p>
<p>usage: padafr=PPOutWriteSqlite3(padain,outf)</p>
</dd></dl>

</section>
<section id="module-modules.PPRandomize">
<span id="modules-pprandomize-module"></span><h2>modules.PPRandomize module<a class="headerlink" href="#module-modules.PPRandomize" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPRandomize.randomizeAstrometry">
<span class="sig-prename descclassname"><span class="pre">modules.PPRandomize.</span></span><span class="sig-name descname"><span class="pre">randomizeAstrometry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ephemsdf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raSigName</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decSigName</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'AstRA(deg)'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'AstDec(deg)'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPRandomize.randomizeAstrometry" title="Permalink to this definition"></a></dt>
<dd><p>Randomize astrometric values (in degrees) for simulated observations</p>
<dl class="simple">
<dt>ephemsdf   … Pandas dataFrame containing output of JPL ephemeris </dt><dd><p>generator and astrometric uncertainties</p>
</dd>
</dl>
<p>Name      … relevant column names in ephemsdf</p>
<p>ephemsOut  … ephems Pandas dataFrame with astrometric values modifed</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modules.PPRandomize.randomizePhotometry">
<span class="sig-prename descclassname"><span class="pre">modules.PPRandomize.</span></span><span class="sig-name descname"><span class="pre">randomizePhotometry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ephemsdf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">photSigName</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">photName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Filtermag'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPRandomize.randomizePhotometry" title="Permalink to this definition"></a></dt>
<dd><p>Randomize photometric values for simulated observations</p>
<dl class="simple">
<dt>ephemsdf   … Pandas dataFrame containing output of JPL ephemeris </dt><dd><p>generator and astrometric uncertainties</p>
</dd>
</dl>
<p>Name      … relevant column names in ephemsdf</p>
<p>ephemsOut  … ephems Pandas dataFrame with photometric values modifed</p>
</dd></dl>

</section>
<section id="module-modules.PPRandomizeMeasurements">
<span id="modules-pprandomizemeasurements-module"></span><h2>modules.PPRandomizeMeasurements module<a class="headerlink" href="#module-modules.PPRandomizeMeasurements" title="Permalink to this headline"></a></h2>
<p>Calculate Astrometric and Photometric Uncertainties for ground based observations and randomize OIF measurements accordingly.</p>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPRandomizeMeasurements.flux2mag">
<span class="sig-prename descclassname"><span class="pre">modules.PPRandomizeMeasurements.</span></span><span class="sig-name descname"><span class="pre">flux2mag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">f</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3631</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPRandomizeMeasurements.flux2mag" title="Permalink to this definition"></a></dt>
<dd><p>AB ugriz system (f0 = 3631 Jy) to magnitude conversion</p>
<p>f  … flux [Jy]
f0 … zero point flux</p>
<p>mag … pogson magnitude</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modules.PPRandomizeMeasurements.icrf2radec">
<span class="sig-prename descclassname"><span class="pre">modules.PPRandomizeMeasurements.</span></span><span class="sig-name descname"><span class="pre">icrf2radec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPRandomizeMeasurements.icrf2radec" title="Permalink to this definition"></a></dt>
<dd><p>Convert ICRF xyz to Right Ascension and Declination.
Geometric states on unit sphere, no light travel time/aberration correction.</p>
<p>x,y,z … 3D vector of unit length (ICRF)
deg … True: angles in degrees, False: angles in radians</p>
<p>ra … Right Ascension [deg]
dec … Declination [deg]</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modules.PPRandomizeMeasurements.mag2flux">
<span class="sig-prename descclassname"><span class="pre">modules.PPRandomizeMeasurements.</span></span><span class="sig-name descname"><span class="pre">mag2flux</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mag</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3631</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPRandomizeMeasurements.mag2flux" title="Permalink to this definition"></a></dt>
<dd><p>AB ugriz system (f0 = 3631 Jy) magnitude to flux conversion</p>
<p>mag … pogson magnitude
f0 … zero point flux</p>
<p>f  … flux [Jy]</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modules.PPRandomizeMeasurements.radec2icrf">
<span class="sig-prename descclassname"><span class="pre">modules.PPRandomizeMeasurements.</span></span><span class="sig-name descname"><span class="pre">radec2icrf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ra</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPRandomizeMeasurements.radec2icrf" title="Permalink to this definition"></a></dt>
<dd><p>Convert Right Ascension and Declination to ICRF xyz unit vector.
Geometric states on unit sphere, no light travel time/aberration correction.
Parameters:
———–
ra … Right Ascension [deg]
dec … Declination [deg]
deg … True: angles in degrees, False: angles in radians</p>
<p>x,y,z … 3D vector of unit length (ICRF)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modules.PPRandomizeMeasurements.randomizeAstrometry">
<span class="sig-prename descclassname"><span class="pre">modules.PPRandomizeMeasurements.</span></span><span class="sig-name descname"><span class="pre">randomizeAstrometry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">df</span></em>, <em class="sig-param"><span class="pre">rng=Generator(PCG64)</span> <span class="pre">at</span> <span class="pre">0x7F9688FCDE40</span></em>, <em class="sig-param"><span class="pre">raName='AstRA(deg)'</span></em>, <em class="sig-param"><span class="pre">decName='AstDec(deg)'</span></em>, <em class="sig-param"><span class="pre">raRndName='AstRARnd(deg)'</span></em>, <em class="sig-param"><span class="pre">decRndName='AstDecRnd(deg)'</span></em>, <em class="sig-param"><span class="pre">sigName='AstSig(deg)'</span></em>, <em class="sig-param"><span class="pre">units='deg'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPRandomizeMeasurements.randomizeAstrometry" title="Permalink to this definition"></a></dt>
<dd><p>Randomize astrometry with a normal distribution around the actual RADEC pointing.
The randomized values are added to the input pandas data frame.</p>
<p>df    … pandas DataFrame containing astrometry and sigma.
rng
xName … column names for right ascension, declination,</p>
<blockquote>
<div><p>randomized right ascension, randomized declination
standard deviation</p>
</div></blockquote>
<p>units … units for angles (‘deg’/’rad’)</p>
<p>df … pandas DataFrame with randomized RADEC columns added</p>
<p>Covariances in RADEC are currently not supported. The routine calculates
a normal distribution on the unit sphere, so as to allow for a correct modeling of
the poles. Distributions close to the poles may look odd in RADEC.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modules.PPRandomizeMeasurements.randomizeObservations">
<span class="sig-prename descclassname"><span class="pre">modules.PPRandomizeMeasurements.</span></span><span class="sig-name descname"><span class="pre">randomizeObservations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ephemsdf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obsdf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fieldRA'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fieldDec'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obsIdName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'observationId'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obsEpochName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'observationStartMJD'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raNameEph</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'AstRA(deg)'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decNameEph</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'AstDec(deg)'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">obsIdNameEph</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'observationId'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ephEpochName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'FieldMJD'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limMagName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fiveSigmaDepth'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seeingName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'seeingFwhmEff'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filterMagName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Filtermag'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPRandomizeMeasurements.randomizeObservations" title="Permalink to this definition"></a></dt>
<dd><p>Add astrometric and photometric errors to observations generated through JPL ephemeris simulator OIF.</p>
<p>ephemsdf   … Pandas dataFrame containing output of JPL ephemeris simulator OIF
obsdf    … Pandas dataFrame containing survey simulator output such as LSST opsim
<a href="#id11"><span class="problematic" id="id12">*</span></a>Name    … relevant column names in obsdf
<a href="#id13"><span class="problematic" id="id14">*</span></a>NameEph … relevant column names in ephemsdf</p>
<p>ephemsOut … ephems Pandas dataFrame (observations with added uncertainties)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modules.PPRandomizeMeasurements.randomizePhotometry">
<span class="sig-prename descclassname"><span class="pre">modules.PPRandomizeMeasurements.</span></span><span class="sig-name descname"><span class="pre">randomizePhotometry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">df</span></em>, <em class="sig-param"><span class="pre">magName='Filtermag'</span></em>, <em class="sig-param"><span class="pre">magRndName='FiltermagRnd'</span></em>, <em class="sig-param"><span class="pre">sigName='FiltermagSig'</span></em>, <em class="sig-param"><span class="pre">rng=Generator(PCG64)</span> <span class="pre">at</span> <span class="pre">0x7F9688FCDE40</span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPRandomizeMeasurements.randomizePhotometry" title="Permalink to this definition"></a></dt>
<dd><p>Randomize photometry with normal distribution around magName value.</p>
<p>df         … pandas DataFrame containing photometric data
magName    … column name of photometric data [mag]
magRndName … column name of randomized photometric data [mag]
sigName    … column name of standard deviation [mag]</p>
<p>df        … returns input pandas DataFrame with added column magRndName</p>
<p>The normal distribution here is in magnitudes while it should be in flux. This will fail for large sigmas.
Should be fixed at some point.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modules.PPRandomizeMeasurements.sampleNormalFOV">
<span class="sig-prename descclassname"><span class="pre">modules.PPRandomizeMeasurements.</span></span><span class="sig-name descname"><span class="pre">sampleNormalFOV</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">center</span></em>, <em class="sig-param"><span class="pre">sigma</span></em>, <em class="sig-param"><span class="pre">ndim=3</span></em>, <em class="sig-param"><span class="pre">rng=Generator(PCG64)</span> <span class="pre">at</span> <span class="pre">0x7F9688FCDE40</span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPRandomizeMeasurements.sampleNormalFOV" title="Permalink to this definition"></a></dt>
<dd><p>Sample n points randomly (normal distribution) on a region on the unit (hyper-)sphere.</p>
<p>center  … center of hpyer-sphere (float, ndim); can be an [n, ndim] dimensional array, but only if n == npoints</p>
<p>sigma   … 1 sigma distance on unit sphere [radians], [n] dimensional array
ndim    … dimension of hyper-sphere (int)
seed    … random seed (int)</p>
<p>vec … numpy array [npoints, ndim]</p>
</dd></dl>

</section>
<section id="module-modules.PPReadBrightness">
<span id="modules-ppreadbrightness-module"></span><h2>modules.PPReadBrightness module<a class="headerlink" href="#module-modules.PPReadBrightness" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPReadBrightness.PPReadBrightness">
<span class="sig-prename descclassname"><span class="pre">modules.PPReadBrightness.</span></span><span class="sig-name descname"><span class="pre">PPReadBrightness</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">br_datafile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beginLoc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunkSize</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filesep</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPReadBrightness.PPReadBrightness" title="Permalink to this definition"></a></dt>
<dd><p>PPReadBrightness.py</p>
<p>Description: This task reads in the brightness file and puts it into a 
single pandas dataframe for further use downstream by other tasks.</p>
<p>The format of the colours is one of the following:</p>
<p>ObjID H G
ObjID H G1 G2
ObjID H G12
ObjID H S</p>
<dl class="simple">
<dt>Mandatory input:      string, br_datafile, name of brightn data file</dt><dd><p>integer, beginLoc, location in file where reading begins
integer, chunkSize, length of chunk to be read in 
string, filesep, separator used in input file, blank or comma</p>
</dd>
</dl>
<p>Output:               pandas dataframe</p>
<p>usage: padafr=PPReadBrightness(br_datafile, beginLoc, chunkSize,filesep)</p>
</dd></dl>

</section>
<section id="module-modules.PPReadColours">
<span id="modules-ppreadcolours-module"></span><h2>modules.PPReadColours module<a class="headerlink" href="#module-modules.PPReadColours" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPReadColours.PPReadColours">
<span class="sig-prename descclassname"><span class="pre">modules.PPReadColours.</span></span><span class="sig-name descname"><span class="pre">PPReadColours</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">clr_datafile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beginLoc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunkSize</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filesep</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPReadColours.PPReadColours" title="Permalink to this definition"></a></dt>
<dd><p>PPReadColours.py</p>
<p>Description: This task reads in the colours file and puts it into a 
single pandas dataframe for further use downstream by other tasks.</p>
<p>The format of the colours is:</p>
<p>id   colour1 colour2 etc</p>
<dl class="simple">
<dt>Mandatory input:      string, clr_datafile, name of colour data file</dt><dd><p>integer, beginLoc, location in file where reading begins
integer, chunkSize, length of chunk to be read in 
string, filesep, separator used in input file, blank or comma</p>
</dd>
</dl>
<p>Output:               pandas dataframe</p>
<p>usage: padafr=PPReadColours(clr_datafile, beginLoc, chunkSize,filesep)</p>
</dd></dl>

</section>
<section id="module-modules.PPReadCometaryInput">
<span id="modules-ppreadcometaryinput-module"></span><h2>modules.PPReadCometaryInput module<a class="headerlink" href="#module-modules.PPReadCometaryInput" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPReadCometaryInput.PPReadCometaryInput">
<span class="sig-prename descclassname"><span class="pre">modules.PPReadCometaryInput.</span></span><span class="sig-name descname"><span class="pre">PPReadCometaryInput</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">comet_datafile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beginLoc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunkSize</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filesep</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPReadCometaryInput.PPReadCometaryInput" title="Permalink to this definition"></a></dt>
<dd><p>PPReadCometaryInput.py</p>
<p>Description: This task reads in the cometary data file and puts it into a 
single pandas dataframe for further use downstream by other tasks.</p>
<p>The format of the colours is:</p>
<p>ObjID   afrho k</p>
<p>NB, the R parameter is not given explicitly, but rather calculated through
the absolute magnitude, assuming geometric albedo pv=0.04</p>
<dl class="simple">
<dt>Mandatory input:      string, comet_datafile, name of comet data file</dt><dd><p>integer, beginLoc, location in file where reading begins
integer, chunkSize, length of chunk to be read in 
string, filesep, separator used in input file, blank or comma</p>
</dd>
</dl>
<p>Output:               pandas dataframe</p>
<p>usage: padafr=PPReadCometaryInput(comet_datafile, beginLoc, chunkSize)</p>
</dd></dl>

</section>
<section id="module-modules.PPReadIntermDatabase">
<span id="modules-ppreadintermdatabase-module"></span><h2>modules.PPReadIntermDatabase module<a class="headerlink" href="#module-modules.PPReadIntermDatabase" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPReadIntermDatabase.PPReadIntermDatabase">
<span class="sig-prename descclassname"><span class="pre">modules.PPReadIntermDatabase.</span></span><span class="sig-name descname"><span class="pre">PPReadIntermDatabase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">intermdb</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">part_objid_list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPReadIntermDatabase.PPReadIntermDatabase" title="Permalink to this definition"></a></dt>
<dd><p>PPReadIntermDatabase.py</p>
<p>Description: This task reads in the intermediate pointing sqlite3 database specified
by a subset of object ids, and outputs a pandas dataframe.</p>
<dl class="simple">
<dt>Mandatory input:      string, intermdb, name of intermediate database sqlite3 database</dt><dd><p>list(string), list of input ObjID:s</p>
</dd>
</dl>
<p>Output:               pandas dataframe</p>
<p>usage: padafr=PPReadIntermDatabase(intermdb,part_objid_list)</p>
</dd></dl>

</section>
<section id="module-modules.PPReadOif">
<span id="modules-ppreadoif-module"></span><h2>modules.PPReadOif module<a class="headerlink" href="#module-modules.PPReadOif" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPReadOif.PPReadOif">
<span class="sig-prename descclassname"><span class="pre">modules.PPReadOif.</span></span><span class="sig-name descname"><span class="pre">PPReadOif</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oif_output</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filesep</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffix</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPReadOif.PPReadOif" title="Permalink to this definition"></a></dt>
<dd><p>PPReadOif.py</p>
<p>Description: This task reads in the output of oif (objectsInField) and puts it into a 
single pandas dataframe for further use downstream by other tasks.</p>
<p>This task should be used as the first one in the collection of subsequent tasks
called recipes.</p>
<p>Any other relevant data (e.g. magnitudes and colours) are read and amended to the
main pandas dataframe by separate tasks.</p>
<dl class="simple">
<dt>Mandatory input:      string, oif_output, name of text file including Output from objectsInField (oif) </dt><dd><p>string, filesep, separator used in input file, blank or comma
string, suffix, file extension of input file, either csv, txt or h5 (hdf5, HDF5)</p>
</dd>
</dl>
<p>Output:               pandas dataframe</p>
<p>usage: padafr=PPReadOif(oif_output,filesep)</p>
</dd></dl>

</section>
<section id="module-modules.PPReadOrbitFile">
<span id="modules-ppreadorbitfile-module"></span><h2>modules.PPReadOrbitFile module<a class="headerlink" href="#module-modules.PPReadOrbitFile" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPReadOrbitFile.PPReadOrbitFile">
<span class="sig-prename descclassname"><span class="pre">modules.PPReadOrbitFile.</span></span><span class="sig-name descname"><span class="pre">PPReadOrbitFile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">orbin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">beginLoc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunkSize</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filesep</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPReadOrbitFile.PPReadOrbitFile" title="Permalink to this definition"></a></dt>
<dd><p>Description: Read orbit file, and store in a pandas dataframe. Note, that here, no
orbit class is initialised</p>
<dl class="simple">
<dt>Mandatory input:   string, orbin (name of input orbit file)</dt><dd><p>integer, beginLoc, location in file where reading begins
integer, chunkSize, length of chunk to be read in 
string, filesep, separator used in input file, blank or comma</p>
</dd>
</dl>
<p>Output:            pandas dataframe</p>
<p>Usage: padafr=PPreadOrbitFile(orbin, beginLoc, chunkSize, filesep)</p>
</dd></dl>

</section>
<section id="module-modules.PPSimpleSensorArea">
<span id="modules-ppsimplesensorarea-module"></span><h2>modules.PPSimpleSensorArea module<a class="headerlink" href="#module-modules.PPSimpleSensorArea" title="Permalink to this headline"></a></h2>
<p>Remove a portion of the observations to simulate the losses due to gaps between
CCD chips and rafts on the sensor.</p>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPSimpleSensorArea.PPSimpleSensorArea">
<span class="sig-prename descclassname"><span class="pre">modules.PPSimpleSensorArea.</span></span><span class="sig-name descname"><span class="pre">PPSimpleSensorArea</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ephemsdf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fillfactor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.9</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPSimpleSensorArea.PPSimpleSensorArea" title="Permalink to this definition"></a></dt>
<dd><p>Randomly removes a number of observations proportional to the
fraction of the field not covered by the detector.</p>
<p>ephemsdf   … pandas dataFrame containing observations
fillfactor … fraction of FOV covered by the sensor</p>
<p>ephemsOut  … pandas dataFrame</p>
</dd></dl>

</section>
<section id="module-modules.PPTrailingLoss">
<span id="modules-pptrailingloss-module"></span><h2>modules.PPTrailingLoss module<a class="headerlink" href="#module-modules.PPTrailingLoss" title="Permalink to this headline"></a></h2>
<p>Calculate Astrometric and Photometric Uncertainties for ground based observations.</p>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPTrailingLoss.PPTrailingLoss">
<span class="sig-prename descclassname"><span class="pre">modules.PPTrailingLoss.</span></span><span class="sig-name descname"><span class="pre">PPTrailingLoss</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oif_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">survey_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'circularPSF'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dra_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'AstRARate(deg/day)'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ddec_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'AstDecRate(deg/day)'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'AstDec(deg)'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seeing_name_oif</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'seeing'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field_id_name_oif</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'FieldID'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seeing_name_survey</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'seeingFwhmGeom'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">field_id_name_survey</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'observationId'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPTrailingLoss.PPTrailingLoss" title="Permalink to this definition"></a></dt>
<dd><p>Calculates Detection trailing loss for objectInField output.</p>
</dd></dl>

</section>
<section id="module-modules.PPTranslateMagnitude">
<span id="modules-pptranslatemagnitude-module"></span><h2>modules.PPTranslateMagnitude module<a class="headerlink" href="#module-modules.PPTranslateMagnitude" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPTranslateMagnitude.PPTranslateMagnitude">
<span class="sig-prename descclassname"><span class="pre">modules.PPTranslateMagnitude.</span></span><span class="sig-name descname"><span class="pre">PPTranslateMagnitude</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oif_output</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">survey_db</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oifFieldIDName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'FieldID'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">surveyFieldIDName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'observationId'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">surveyFilterName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'filter'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oifObjIDName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ObjID'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colorsObjIDName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ObjID'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oif_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'V'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPTranslateMagnitude.PPTranslateMagnitude" title="Permalink to this definition"></a></dt>
<dd><p>Uses filter and color information from survey and color tables
to translate V band magnitude to appropriate sdss filter magnitude.</p>
<p>oif_output   …   pandas table containing output of objectsInField simulator
survey_db    …   pandas table containing field conditions for each observation
colors       …   pandas table containing color difference between V band</p>
<blockquote>
<div><p>appropriate filter bands for each object.</p>
</div></blockquote>
<p>MaginFil     …   pandas series containing translated magnitudes</p>
</dd></dl>

</section>
<section id="module-modules.PPVignetting">
<span id="modules-ppvignetting-module"></span><h2>modules.PPVignetting module<a class="headerlink" href="#module-modules.PPVignetting" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPVignetting.calcVignettingLosses">
<span class="sig-prename descclassname"><span class="pre">modules.PPVignetting.</span></span><span class="sig-name descname"><span class="pre">calcVignettingLosses</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ra</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fieldra</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fielddec</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPVignetting.calcVignettingLosses" title="Permalink to this definition"></a></dt>
<dd><p>Calculates magnitude loss due to vignetting for a point with the telescope
centered on fieldra, fielddec.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modules.PPVignetting.haversine">
<span class="sig-prename descclassname"><span class="pre">modules.PPVignetting.</span></span><span class="sig-name descname"><span class="pre">haversine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ra1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ra2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPVignetting.haversine" title="Permalink to this definition"></a></dt>
<dd><p>Calculates angular distance between two points. Can produce floating point
errors for antipodal points, which are not intended to be encountered within
the scope of this module.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modules.PPVignetting.vignetFunc">
<span class="sig-prename descclassname"><span class="pre">modules.PPVignetting.</span></span><span class="sig-name descname"><span class="pre">vignetFunc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPVignetting.vignetFunc" title="Permalink to this definition"></a></dt>
<dd><p>Grabbed from sims_selfcal. From VignettingFunc_v3.3.TXT.  r is in degrees, frac is fraction of rays which were not vignetted.
returns the magnitudes of dimming caused by the vingetting relative to the center of the field</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="modules.PPVignetting.vignettingLosses">
<span class="sig-prename descclassname"><span class="pre">modules.PPVignetting.</span></span><span class="sig-name descname"><span class="pre">vignettingLosses</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oifdf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">surveydf</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raNameOIF</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'AstRA(deg)'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decNameOIF</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'AstDec(deg)'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fieldNameOIF</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'FieldID'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raNameSurvey</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fieldRA'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decNameSurvey</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fieldDec'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPVignetting.vignettingLosses" title="Permalink to this definition"></a></dt>
<dd><p>Takes dataframes containg observation and field positions and calculates
the magnitude losses due to vignetting.</p>
</dd></dl>

</section>
<section id="module-modules.PPhookBrightnessWithColour">
<span id="modules-pphookbrightnesswithcolour-module"></span><h2>modules.PPhookBrightnessWithColour module<a class="headerlink" href="#module-modules.PPhookBrightnessWithColour" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPhookBrightnessWithColour.PPhookBrightnessWithColour">
<span class="sig-prename descclassname"><span class="pre">modules.PPhookBrightnessWithColour.</span></span><span class="sig-name descname"><span class="pre">PPhookBrightnessWithColour</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">padain</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initfilter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colour</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resfilter</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPhookBrightnessWithColour.PPhookBrightnessWithColour" title="Permalink to this definition"></a></dt>
<dd><p>Task: PPHookBrightnessWithColour</p>
<dl>
<dt>Input: padain: combined pandas dataframe, including objectsInField (oif) and colours</dt><dd><p>in the ‘col-X format’.</p>
<p>initfilter (string): designation of column which contains the apparent brightness of
the object. The brightness is given in a specific filter.</p>
<p>colour (string): designation of column which contains the colour in the ‘col1-col2’ format,
for example ‘r-i’ or ‘r-X’. By default, it is assumed that the H colours are
defined in the r filter.</p>
<p>resfilter (string): the resulting filter, in which the apparent brightness will be given.</p>
</dd>
</dl>
<p>Action: Goes through every row in pandas dataframe and adds up the values in the columns 
‘initfilter’ and ‘colour’, and adds a new column ‘resfilter’ with</p>
<p>Output: the input pandas dataframe (modified), amended with the new column, including
the apparent brightnesses in the given ‘resfilter’ filter.</p>
<p>Author: Grigori Fedorets</p>
<p>Usage: pphookbrightnesswithcolour(combdf, ‘r’, ‘i-r’, ‘i’)</p>
</dd></dl>

</section>
<section id="module-modules.PPreadColoursUser">
<span id="modules-ppreadcoloursuser-module"></span><h2>modules.PPreadColoursUser module<a class="headerlink" href="#module-modules.PPreadColoursUser" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="modules.PPreadColoursUser.PPreadColoursUser">
<span class="sig-prename descclassname"><span class="pre">modules.PPreadColoursUser.</span></span><span class="sig-name descname"><span class="pre">PPreadColoursUser</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">oif_out</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colour</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mean</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdev</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indataf</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#modules.PPreadColoursUser.PPreadColoursUser" title="Permalink to this definition"></a></dt>
<dd><p>PPreadColoursUser.py</p>
<p>Description: This task assigns a designated colour to each object in the
input file and puts it into a
single pandas dataframe for further use downstream by other tasks.
Only one colour is assigned, for more colours, the user may run this
function several times with different parameters.</p>
<p>The user may decide to give a single colour, or a uniform distribution of 
colours.
In case of a single colour, the stdev parameter should be given as zero.</p>
<p>The format of the colours is:</p>
<p>id   colour1 colour2 etc</p>
<p>The also may also wish to amend the existing dataFrame with colours with 
another colour. In that case, duplicate ObjID columns will be removed.</p>
<p>Mandatory input:      
Output from objectsInField (oif) in text file
colour (string)
mean colour (float)
standard deviation (float)
existing colour dataframe (pandas dataFrame, optional)</p>
<p>Output:               pandas dataframe</p>
<dl class="simple">
<dt>usage: padafr=PPreadColoursUser(oif_out, ‘g-X’, 0.33, 0.01)</dt><dd><p>pada3=PPreadColoursUser(pada1, ‘r-X’, 0.25, 0.00, indataf=pada2)</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-modules">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-modules" title="Permalink to this headline"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="support.html" class="btn btn-neutral float-left" title="Support" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="modules.tests.html" class="btn btn-neutral float-right" title="modules.tests package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Siegfried Eggl, Mario Juric, Meg Schwamb, Grigori Fedorets, Shantanu Naidu, Sam Cornwall, Aidan Berres.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>